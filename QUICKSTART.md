# 🚀 快速启动指南

## 1️⃣ 启动前端（开发模式）

```bash
cd packages/frontend
npm run dev
```

前端将运行在: http://localhost:5173

---

## 2️⃣ 启动后端（开发模式）

```bash
cd packages/backend
npm run dev
```

后端将运行在: http://localhost:3001/health

---

## 3️⃣ 同时启动前后端（推荐）

在根目录下：

```bash
npm run dev
```

这会同时启动前端和后端服务。

---

## 🎨 已实现的功能

### ✅ Phase 1: 基础拖拽
- [x] 文本组件拖拽
- [x] 图形组件（矩形、圆形、线条）拖拽
- [x] 组合组件（页眉）拖拽
- [x] 选中组件
- [x] 拖拽移动组件
- [x] 美观界面
- [x] 响应式布局

### ✅ Phase 2: 完善拖拽（全新实现 ✨）
- [x] **组件缩放** - 8方向手柄，支持各方向缩放
- [x] **组件旋转** - 旋转手柄，支持0-360度旋转
- [x] **属性编辑面板** - 右侧面板实时编辑组件属性
- [x] **图层管理** - 调整组件zIndex，上移下移
- [x] **删除功能** - 选中后按Delete/Backspace删除，或点击面板删除按钮
- [x] **SVG导出** - 导出画布为矢量SVG文件
- [x] **PNG导出** - 导出画布为高清PNG图片
- [x] **键盘快捷键** - Delete/Backspace删除，Escape取消选择
- [x] **实时属性编辑** - 位置、大小、旋转、透明度、颜色等

---

## 🎯 使用指南

### 基础操作

1. **添加组件**
   - 点击工具栏左侧的"T"按钮添加文本
   - 点击方块按钮添加矩形
   - 点击圆形按钮添加圆形
   - 点击组合图标添加页眉

2. **拖拽移动**
   - 直接拖拽画布上的组件
   - 自动更新位置

3. **选中组件**
   - 点击组件即可选中
   - 选中后显示橙色边框和控制手柄

4. **调整大小**
   - 选中组件后，拖拽8个角落手柄
   - 支持各方向自由缩放

5. **旋转组件**
   - 选中组件后，拖拽顶部中间的旋转手柄
   - 或者使用属性面板的滑块精确控制

6. **编辑属性**
   - 选中组件后，右侧显示属性面板
   - 可以编辑：位置、大小、旋转、透明度、颜色、文字内容等
   - 支持实时预览

7. **删除组件**
   - 选中组件
   - 按Delete或Backspace键
   - 或点击属性面板右上角的删除按钮

8. **取消选择**
   - 点击画布空白区域
   - 或按Escape键

9. **导出海报**
   - 点击工具栏下方的导出按钮
   - 选择导出为SVG或PNG
   - 文件自动下载

### 属性面板说明

选中组件后，右侧面板显示：

**基本属性**
- 组件类型显示
- X/Y坐标输入
- 宽度/高度输入
- 旋转角度（滑块+数字输入）
- 透明度（滑块+数字输入）

**图层控制**
- 显示当前层级
- 上移/下移按钮
- 支持调整组件遮挡关系

**组件特定属性**
- 文本：文字内容、字体大小、颜色、对齐方式、字体粗细
- 图形：填充颜色、边框颜色、边框宽度、圆角半径

---

## 🎨 界面说明

### 布局

```
┌─────────────────────────────────────────────────┐
│  工具栏  │    画布区域       │  属性面板  │
│           │                    │             │
│  - 文本   │  ┌──────────────┐  │  - 坐标    │
│  - 矩形   │  │              │  │  - 大小    │
│  - 圆形   │  │   海报      │  │  - 旋转    │
│  - 组合   │  │              │  │  - 透明度  │
│           │  └──────────────┘  │             │
│  - 导出   │                    │  - 组件属性 │
│           │                    │             │
└─────────────────────────────────────────────────┘
```

### 主题

- **深色科技感** - 深蓝黑基底 + 活力橙点缀
- **工具栏** - 左侧固定，分类清晰
- **属性面板** - 右侧固定，实时编辑
- **画布** - 居中显示，阴影效果

---

## 🔧 技术特性

### 拖拽系统
- **react-konva** - 基于Canvas的高性能渲染
- **Transformer** - 专业级缩放旋转控制
- **Zustand** - 全局状态管理
- **实时响应** - 拖拽时流畅无卡顿

### 组件系统
- **原子组件** - 文本、矩形、圆形
- **组合组件** - 页眉（支持嵌套）
- **统一接口** - 所有组件支持相同操作
- **灵活扩展** - 易于添加新组件

### 导出功能
- **SVG导出** - 矢量格式，可缩放不失真
- **PNG导出** - 高清图片，适合打印和分享
- **自动命名** - 文件名包含时间戳，避免覆盖

---

## 🐛 已知问题

- [ ] 组合组件的子组件编辑待完善
- [ ] 多选组件功能未实现
- [ ] 对齐辅助线未实现
- [ ] 撤销/重做功能未实现

---

## 💡 使用技巧

1. **快速操作** - 使用键盘快捷键Delete删除，Escape取消选择
2. **精确控制** - 使用属性面板的滑块精确调整旋转和透明度
3. **颜色选择** - 支持颜色选择器和HEX码输入
4. **图层管理** - 调整zIndex让正确组件显示在最上层
5. **导出格式** - SVG适合编辑和打印，PNG适合分享

---

## 📝 开发日志

### 2026-01-13 Phase 1
- [x] 初始化Monorepo项目结构
- [x] 配置前端（React + Vite + Tailwind + Konva）
- [x] 配置后端（Express + TypeScript）
- [x] 实现基础拖拽系统
- [x] 实现原子组件（文本、矩形、圆形）
- [x] 实现组合组件（页眉）
- [x] 实现工具栏UI
- [x] 实现画布和网格
- [x] 配置美观的主题样式

### 2026-01-13 Phase 2（短期功能完成）
- [x] 实现Transformer缩放和旋转系统
- [x] 创建属性编辑面板（PropertyPanel）
- [x] 支持实时编辑所有组件属性
- [x] 实现删除功能（键盘+按钮）
- [x] 实现图层控制（zIndex上下移动）
- [x] 实现SVG导出功能
- [x] 实现PNG导出功能
- [x] 集成Stage Ref实现导出
- [x] 优化键盘事件处理

---

## 🔗 相关资源

- [Konva.js文档](https://konvajs.org/docs)
- [react-konva文档](https://github.com/konvajs/react-konva)
- [Zustand文档](https://docs.pmnd.rs/zustand)
- [Tailwind CSS文档](https://tailwindcss.com/docs)
- [通义千问API](https://help.aliyun.com/zh/dashscope/)

---

## 🎉 享受使用！

短期功能已全部完成，现在可以开始创建专业海报了！
